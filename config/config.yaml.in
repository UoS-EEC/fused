#
# Copyright (c) 2019-2020, University of Southampton and Contributors.
# All rights reserved.
#
# SPDX-License-Identifier: Apache-2.0
#

# Fused configuration parameters.
# Note that command line options take precedence over config-file options, so
# any options specified here may be overruled when launching Fused.

# ------ Paths ------
OutputDirectory: /tmp/fused-outputs
BootTracePath: @CMAKE_CURRENT_SOURCE_DIR@/config/boot-trace.csv
VccMultiplierPath: @CMAKE_CURRENT_SOURCE_DIR@/config/vsweep-current.csv

# Operation mode/Program to execute:
GdbServer: True # Will use gdb server to control mcu if true, loads ProgramHexFile otherwise
ProgramHexFile: /tmp/output.hex # Path to a program hex file

Bme280TraceFile: /tmp/bme280data.csv

# ------ Simulation control ------
SimTimeLimit: 30.0 # Simulation time limit (seconds)
IoSimulationStopperTarget: 3 # Simulation stops after X posedge of pin connected to simstopper
EventLogStart: simulation_start # {event, simulation_start}

# ------ Timesteps ------
EventLogTimeStep: 10.0e-6 # Period over which to aggregate events
MCUPowerTimestep: 10.1e-6 # Rate at which mcu current is computed
ExtTimestep: 5.0E-6
CapacitorTimeStep: 5.0e-6

# ------ Cortex M0 Clocks ------
MasterClockPeriod: 125.0e-9
PeripheralClockPeriod: 125.0e-9

# ------ Power supply ------
PowerSupply: ConstantCurrentSupply
SupplyCurrentLimit: 5.0E-3
SupplyVoltageLimit: 3.59

# ------ Power system ------
CpuCoreVoltage: 1.8
# Supply voltage supervisor
SVSVon: 3.5
SVSVoff: 3.4
VoltageWarning: 2.0

# Storage capacitor
CapacitorValue: 4.7e-6
CapacitorInitialVoltage: 0.0

ExtIcc: 25.0E-6 # Static current draw of external circuitry

# Power management module
PMMOn: 1.9
PMMOff: 1.8
VMAX: 3.6

# ------ Cache settings ------
# Available replacement policies are:
# {LRU, LFU, RoundRobin, PseudoRandom}
mcu.cache.CacheReplacementPolicy: LRU

mcu.cache.CacheWritePolicy: WriteAround # {WriteThrough, WriteAround, WriteBack}
mcu.cache.CacheLineWidth: 8
mcu.cache.CacheNLines: 2
mcu.cache.CacheNSets: 2

# ------ Power consumption coefficients ------
#
# Power consumption of states (in this case current (A))
mcu.CPU on: 0.0
mcu.Adc on: 295.75e-6 #130.0e-6
ext.dc : 25.0e-6 # External circuitry static current consumption

# Energy consumption of events (J)
mcu.CPU idle cycles: 2.0128059437442775e-10
mcu.cache read hit: 2.1159007820425844e-10
mcu.cache read miss: 6.346704408546349e-10
mcu.cache write: 6.823167771173059e-10
mcu.sram rw: 1.981169616404032e-10

# BME280 temperature/humidity/pressure sensor power consumption (state-based)
bme280.off:  0.0
bme280.sleep: 0.1e-6
bme280.standby: 0.2e-6
bme280.measure_humidity: 340.0e-6
bme280.measure_pressure:  714.0e-6
bme280.measure_temperature: 350.0e-6
